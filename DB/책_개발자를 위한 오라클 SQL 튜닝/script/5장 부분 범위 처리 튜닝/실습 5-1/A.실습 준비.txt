CREATE TABLE TB_ORD_DAY
(
    ORD_DT VARCHAR2(8), --주문일자
    ORD_NO VARCHAR2(10) --주문번호
);

ALTER TABLE TB_ORD_DAY NOLOGGING;

DECLARE

TYPE ORD_DT_TABLE IS TABLE OF VARCHAR2(8)
INDEX BY BINARY_INTEGER;

ORD_DT_TAB ORD_DT_TABLE;
i BINARY_INTEGER := 0;

BEGIN
FOR ORD_DT_LIST
IN
(
    SELECT
    TO_CHAR(SYSDATE-ROWNUM, 'YYYYMMDD') ORD_DT
    FROM DUAL
    CONNECT BY
      LEVEL <= 3650
    ORDER BY 1
)
LOOP
i := i + 1;
ORD_DT_TAB(i) :=  ORD_DT_LIST.ORD_DT;
    INSERT INTO TB_ORD_DAY
    SELECT
        ORD_DT_TAB(i),
        LPAD(TO_CHAR(ROWNUM), 10, '0')
    FROM DUAL CONNECT BY LEVEL <= 10000;
    COMMIT;
END LOOP;
END;
/

ALTER TABLE TB_ORD_DAY
ADD CONSTRAINT TB_ORD_DAY_PK 
PRIMARY KEY(ORD_DT, ORD_NO);

ANALYZE TABLE TB_ORD_DAY COMPUTE STATISTICS
FOR TABLE FOR ALL INDEXES FOR ALL INDEXED COLUMNS SIZE 254;
