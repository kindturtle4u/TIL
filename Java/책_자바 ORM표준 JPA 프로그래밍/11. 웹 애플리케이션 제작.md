> 출처 : 자바 ORM 표준 JPA 프로그래밍 읽으면서 정리  

# 11. 웹 애플리케이션 제작
## 11.1 프로젝트 환경설정
### 11.1.1 프로젝트 구조
메이븐이 제공하는 표준 프로젝트 구조 사용

### 11.1.2 메이븐과 사용 라이브러리
메이븐 `<dependency>`의 `<scope>` 설정
- compile(기본값): 컴파일 시 라이브러리를 사용한다.
- runtime: 실행 시 라이브러리를 사용한다.
- provided: 외부에서 라이브러리가 제공된다. 컴파일 시 사용하지만 빌드에 포함하지 않는다. 보통 JSP, Servlet 라이브러리들에 사용한다.
- test: 테스트 코드에만 사용한다.

### 11.1.3 스프링 프레임워크 설정

## 11.2 도메인 모델과 테이블 설계
### 11.2.1 요구사항 분석
### 11.2.2 도메인 모델 설계
### 11.2.3 테이블 설계
### 11.2.4 연관관계 정리
### 11.2.5 엔티티 클래스

## 11.3 애플리케이션 구현
### 11.3.1 개발 방법
### 11.3.2 회원 기능
@PresistenceContext는 컨테이너가 관리하는 엔티티 매니저를 주입하는 어노테이션이다.
```java
@Repository
public class MemberRepository {
    @PersistenceContext
    EntityManager em;
    ...
}
```

@PersistenceUnit : 엔티티 매니저 팩토리을 주입하는 어노테이션이다.

#### 회원기능 테스트
Given, When, Then(martinfowler.com/bliki/GivenWhenThen.html)
테스트를 이해하기 쉽게 도와준다. 
Given절에서 테스트할 상황을 설정하고 When절에서 테스트 대상을 실행하고 Then 절에서 결과를 검증한다.

스프링 프레임워크와 테스트 통합
`@RunWith(SpringJunit4ClassRunner.class)`  
이렇게 하면 테스트가 스프링 컨테이너에서 실행되므로
스프링 프레임워크가 제공하는 @Autowired 같은 기능들을 사용할 수 있다.

`@ContextConfiguration(locations = "classpath:appConfig.xml")`  
테스트 케이스를 실행할 때 사용할 스프링 설정 정보를 지정한다.

`@Transactional` 어노테이션을 테스트에서 사용하면 동작 방식이 달라진다.
이때는 각각의 테스트를 실행할 때 마다 트랜잭션을 시작하고 테스트가 끝나면 트랜잭션을 강제로 롤백한다.

### 11.3.3 상품 기능
### 11.3.4 주문 기능
엔티티가 비지니스 로직을 가지고 객체지향의 특성을 적극 활용하는 것을 **도메인 모델 패턴** 이라 한다.
반대로 엔티티에는 비지니스 로직이 거의 없고 서비스 계층에서 대부분의 비즈니스 로직을 처리하는 것을 **트랜잭션 스크립트 패턴** 이라 한다.

### 11.3.5 웹 계층 구현

## 11.4 정리





