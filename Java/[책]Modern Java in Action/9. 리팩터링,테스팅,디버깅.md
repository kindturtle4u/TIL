> 출처 : 모던 자바 인 액션 읽으면서 정리

# PART Ⅲ 스트림과 람다를 이용한 효과적 프로그래밍
# Chapter 9 리팩터링, 테스팅, 디버깅
람다 표현식으로 전락(strategy), 템플릿메서드(template method), 옵저버(observer), 의무체인(chain of responsibility), 팩토리(factory)등의
객체지향 디자인 패턴을 어떻게 간소화할 수 있는지도 살펴본다. 

## 9.1 가독성과 유연성을 개선하는 리팩터링
### 9.1.1 코드 가독성 개선
일반적으로 코드 가독성이 좋다는 것은 '어떤 코드를 다른사람도 쉽게 이해할 수 있음'을 의미한다.

### 9.1.2 익명 클래스를 람다 표현식으로 리팩터링하기
모든 익명 클래스를 람다 표현식으로 변환할 수 있는 것은 아니다  
첫째, 익명클래스에서 사용한 this와 super는 람다 표현식에서 다른 의미를 갖는다. 익명클래스에서 this는 익명클래스 자신을 가리키지만 람다에서 this는
람다를 감싸는 클래스를 가리킨다.  
둘째, 익명 클래스는 감싸고 있는 클래스의 변수를 가릴 수 있다.(섀도 변수 shadow variable).  
마지막으로 익명 클래스를 람다 표현식으로 바꾸면 콘텍스트 오버로딩에 따른 모호함이 초래 될 수 있다. 
익명 클래스는 인스턴스화할 때 명시적으로 형식이 정해지는 반면 람다의 형식은 콘텍스트에 따라 달라지기 때문인다.

### 9.1.3 람다 표현식을 메서드 참조로 리팩터링하기
람다 표현식은 쉽게 전달할 수 있는 짧은 코드다. 하지만 람다 표현식 대신 메서드 참조를 이요하면 가독성을 높일 수 있다.

### 9.1.4 명령형 데이터 처리를 스트림으로 리팩터링하기
스트림 API는 데이터 처리 파이프라인의 의도를 더 명확하게 보여준다.

### 9.1.5 코드 유연성 개선
- 함수형 인터페이스 적용  
람다 표현식을 이용하려면 함수형 인터페이스가 필요하다.

- 조건부 연기 실행  
- 실행 어라운드

## 9.2 람다로 객체지향 디자인 패턴 리팩터링하기
디자인 패턴은 공통적인 소프트웨어 문제를 설계할 때 재사용할 수 있는, 검증된 청사진을 제공한다.
람다를 이용하면 이전에 디자인 패턴으로 해결하던 문제를 더 쉽고 간단하게 해결할 수 있다.

- 전략(Strategy)
- 템플릿 메서드(template method)
- 옵저버(observer)
- 의무체인(chain of responsibility)
- 팩토리(factory)

### 9.2.1 전략
전략 패턴은 한 유형의 알고리즘을 보유한 상태에서 런타임에 적절한 알고리즘을 선택하는 기법이다.

전략 패턴은 세 부분으로 구성된다.  

- 알고리즘을 나타내는 인터페이스(Strategy 인터페이스)
- 다양한 알고리즘을 나타내는 한개 이상의 인터페이스 구현(ConcreteStrategyA, ConcreteStrategyB 같은 구체적인 구현 클래스)
- 전략 객체를 사용하는 한 개 이상의 클라이언트

### 9.2.2 템플릿 메서드
알고리즘의 개요를 제시한 다음에 알고리즘의 일부를 고칠 수 있는 유연함을 제공해야 할 때 템플릿 메서드 디자인 패턴을 사용한다.
다시말해 '이 알고리즘을 사용하고 싶은데 그대로는 안 되고 조금 고쳐야 하는' 상황에 적합하다.

### 9.2.3 옵저버
어떤 이벤트가 발생했을 때 한 객체(주제subject라 불리는)가 다른 객체 리스트(옵저버observer라불리는)에 자동으로 알림을 보내야 하는 상황에서 옵저버
디자인 패턴을 사용한다.

### 9.2.4 의무 체인
작업 처리 객체의 체인(동작 체인 등)을 만들 때는 의무 체인 패턴을 사용한다.
한 객체가 어떤 작업을 처리한 다음에 다른 객체로 결과를 전달하고, 다른 객체도 해야 할 작업을 처리한 다음에 또 다른 객체로 전달하는 식이다.

### 9.2.5 팩토리
인스턴스화 로직을 클라이언트에 노출하지 않고 객체를 만들 때 팩토리 디자인 패턴을 사용한다.

## 9.3 람다 테스팅
### 9.3.1 보이는 람다 표현식의 동작 테스팅
### 9.3.2 람다를 사용하는 메서드의 동작에 집중하라
### 9.3.3 복잡한 람다를 개별 메서드로 분할하기
### 9.3.4 고차원 함수 테스팅

## 9.4 디버깅
### 9.4.1 스택 트레이스 확인
### 9.4.2 정보 로깅
peek으로 스트림 파이프라인의 각 동작 전후의 중간값을 출력한다.

## 9.5 마치며

 
