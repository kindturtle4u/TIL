> 출처 : 리팩토링 2판: 코드 구조를 체계적으로 개선하여 효율적인 리팩터링 구현하기 (저자: 마틴 파울러)

# 6. 기본적인 리팩터링
- 내가 가장 많이 사용하는 리팩터링은 *함수 추출하기(6.1절)* 와 *변수 추출하기(6.3절)* 다. 리팩터링은 본래 코드를 변경하는 작업인 만큼, 이 두 리팩터링을
  반대로 진행하는 *함수 인라인하기(6.2절)* 와 *변수 인라인하기(6.4)절* 도 자주 사용한다.
- *함수 선언 바꾸기(6.5절)* 는 함수의 이름을 변경할 때 많이 쓰인다. 함수의 인수를 추가하거나 제거할 때도 이 리팩터링을 적용한다.
- 바꿀 대상이 변수라면 *변수 이름 바꾸기(6.7절)*를 사용하는데, 이는 *변수 캡슐화하기(6.6절)* 와 관련이 깊다. 자주 함께 뭉쳐 다니는 인수들은 
*매개변수 객체 만들기(6.8절)* 를 적용해 객체 하나로 묶으면 편리할 때가 많다.
- 일단 함수를 만들고 나면 다시 고수준 모듈로 묶어야 한다. 이렇게 함수를 그룹으로 묶을 때는 *여러 함수를 클래스로 묶기(6.9절)* 를 이용한다.
이때 이 함수들이 사용하는 데이터도 클래스로 함께 묶는다.
- 또 다른방법으로 *여러 함수를 변환 함수로 묶기(6.10절)* 도 있는데, 읽기전용 데이터를 다룰 때 특히 좋다.
- 나는 한걸음 더 나아가, 한데 묶은 모듈들을 작업 처리 과정을 명확한 단계(phase)로 구분 짓는 *단계 쪼개기(6.11절)* 를 적용할 때도 많다.

## 6.1 함수 추출하기(Extract Function)
- 반대 리팩터링: 함수 인라인하기(6.2절)

```javascript
function printOwing(invoice) {
    printBanner();
    let outstanding = calculateOutstanding();
    
    // 세부 사항 출력
    console.log(`고객명: ${invoice.customer}`);
    console.log(`채무액: ${outstanding}`);
}
```

```javascript
function printOwing(invoice) {
    printBanner();
    let outstanding = calculateOutstanding();
    printDetails(outstanding);
    
    function printDetails(outstanding) {
        console.log(`고객명 : ${invoice.customer}`);
        console.log(`채무액 : ${outstanding}`);
    }
}
```

### 배경
- 코드 조각을 찾아 무슨 일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다.
- 코드를 언제 독립된 함수로 묶어야 할지에 관한 의견은 수없이 많다.
  * 먼저 길이를 기준으로 삼을 수 있다. 가령 함수 하나가 한 화면을 넘어가서는 안된다는 규칙을 떠올릴 수 있다.
  * 재사용성을 기준으로 할 수도 있다. 두 번 이상 사용될 코든느 함수로 만들고, 한 번만 쓰이는 코드는 인라인 상태로 놔두는 것이다.
- 하지만 내 눈에는 '목적과 구현을 분리' 하는 방식이 가장 합리적인 기준으로 보인다.
코드를 보고 무슨일을 하는지 파악하는데 한참이 걸린다면 그 부분을 함수로 추출한 뒤 '무슨 일'에 걸맞는 이름을 짓는다. 이렇게 해두면 나중에
코드를 다시 읽을 때 함수의 목적이 눈에 확 들어오고, 본문코드(그 함수가 목적을 이루기 위해 구체적으로 수행하는 일)에 대해서는 더 이상 신경쓸 일이 거의 없다.
- 이러한 짧은 함수의 이점은 이름을 잘 지어야만 발휘되므로 이름 짓기에 특별히 신경 써야 한다. 이름을 잘 짓기까지는 어느 정도 훈련이 필요하다.
하지만 일단 요령을 터득한 후에는 별도 문서 없이 코드 자체만으로 내용을 충분히 설명되게 만들 수 있다.

### 절차
- 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다('어떻게'가 아닌 '무엇을' 하는지가 드러나야 한다.)
- 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여 넣는다.
- 추출한 코드 중 원본 함수의 지역 변수를 참조하거나 추출한 함수의 유효범위를 벗어나는 변수는 없는지 검사한다. 있다면 매개변수로 전달한다.
- 변수를 다 처리 했다면 컴파일한다.
- 원본 함수에서 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 바꾼다(즉, 추출한 함수로 일을 위임한다).
- 테스트한다.
- 다른 코드에 방금 추출한 것과 똑같거나 비슷한 코드가 없는지 살핀다. 
있다면 방금 추출한 새  함수를 호출하도록 바꿀지 검토한다(인라인 코드를 함수 호출로 바꾸기(8.5절))

## 6.2 함수 인라인하기
  