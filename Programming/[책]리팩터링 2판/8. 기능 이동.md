> 출처 : 리팩토링 2판: 코드 구조를 체계적으로 개선하여 효율적인 리팩터링 구현하기 (저자: 마틴 파울러)

# 8. 기능 이동
## 8.1 함수 옮기기 (Move Function)
```javascript
class Account {
    get overdraftCharge() {}
}
```
```javascript
class AccountType {
    get overdraftCharge() {}
}
```

### 배경
- 좋은 소프트웨어 설계의 핵심은 모듈화가 얼마나 잘 되어 있느냐를 뜻하는 모듈성이다. 모듈성이란 프로그램의 어딘가를 수정하려 할 때 해당 기능과 깊이
관련된 작은 부분만 이해해도 가능하게 해주는 능력이다.
- 모듈성을 높이려면 서로 연관된 요소들을 함께 묶고, 요소 사이의 연결 관계를 쉽게 찾고 이해할 수 있도록 해야한다. 하지만 프로그램을 얼마나 잘 이해했느냐
에 따라 구체적인 방법이 달라질 수 있다.
- 보통은 이해도가 높아질수록 소프트웨어 요소들을 더 잘 묶는 새로운 방법을 깨우치게 된다. 
그래서 높아진 이해를 반영하려면 요소들을 이리저리 옮겨야 할 수 있다.

### 절차
- 선택한 함수가 현재 컨텍스트에서 사용중인 모든 프로그램 요소를 살펴본다. 이 요소들 중에도 함께 옮겨야 할 게 있는지 고민해본다.
    * 호출되는 함수 중 함께 옮길 게 있다면 대체로 그 함수를 먼저 옮기는게 낫다. 얽혀 있는 함수가 여러 개라면 다른 곳에 미치는 영향이 적은 함수부터
      옮기도록 하자.
    * 하위 함수들은 호출자가 고수준 함수 하나뿐이면 먼저 하위 함수들을 고수준 함수에 인라인한 다음, 고수준 함수를 옮기고, 
      옮긴 위치에서 개별 함수들로 다시 추출하자
- 선택함 함수가 다형 메서드 인지 확인한다
    * 객체 지향 언어에서는 같은 메서드가 슈퍼클래스나 서브클래스에도 선언되어 있는지까지 고려해야 한다.
- 선택한 함수를 타깃 컨텍스트로 복사한다(이때 원래의 함수를 소스 함수(source function)라 하고 복사해서 만든 새로운 함수를 타깃 함수(targer function)라 한다).
  타깃 함수가 새로운 터전에 잘 자리 잡도록 다듬는다.
    * 함수 본문에서 소스 컨텍스트의 요소를 사용한다면 해당 요소들을 매개변수로 넘기거나 소스 컨텍스트 자체를 참조로 넘겨준다.
    * 함수를 옮기게 되면 새로운 컨텍스트에 어울리는 새로운 이름으로 바꿔줘야 할 경우가 많다. 필요하면 바꿔준다.
- 정적 분석을 수행한다.
- 소스 컨텍스트에서 타깃 함수를 참조할 방법을 찾아 반영한다.
- 소스 함수를 타깃 함수의 위임 함수가 되도록 수정한다.
- 테스트한다.
- 소스 함수를 인라인할지 고민해본다.
    * 소스 함수는 언제까지라도 위임 함수로 남겨둘 수 있다. 하지만 소스 함수를 호출하는 곳에서 타깃 함수를 직접 호출하는 데 무리가 없다면 중간 단계(소스 함수)는 
      제거하는 편이 낫다.

## 8.2 필드 옮기기 (Move Field)
```javascript
class Customer {
    get plan() {return this._plan;}
    get discountRate() {return this._discountRate;}
}
```
```javascript
class Customer {
    get plan() {return this._plan;}
    get discountRate() {return this.plan.discountRate;}
}
```