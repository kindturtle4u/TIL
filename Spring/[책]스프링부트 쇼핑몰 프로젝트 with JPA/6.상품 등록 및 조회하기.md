> 출처 :  스프링 부트 쇼핑몰 프로젝트 with JPA 읽으면서 정리 (https://github.com/roadbook2/shop)

# 6장 상품 등록 및 조회하기
## 6.1 상품 등록하기
- 상품의 이미지를 저장하는 상품 이미지 엔티티를 만들겠습니다.
- 상품을 등록할 때는 화면으로부터 전달받은 DTO 객체를 엔티티 객체로 변환하는 작업을 해야 하고, 상품을 조회할 때는 엔티티 객체를 DTO 객체로 바꿔주는 작업을 해야 합니다.
이 작업은 반복적인 작업입니다. 멤버 변수가 몇 개 없다면 금방 할 수도 있겠지만 멤버 변수가 많아진다면 상당한 시간을 소모합니다.
이를 도와주는 라이브러리로 modelmapper 라이브러리가 있습니다. 이 라이브러리는 서로 다른 클래스의 값을 필드의 이름과 자료형이 같으면 getter, setter를 통해 값을 복사해서 객체를 반환해줍니다.
- `ModelMapper.map(Object source, Class<D> destinationType)` `ex) modelMapper.map(itemImg, ItemImgDto.class);`
- application.properties의 ddl-auto 속성을 validate로 변경하면 애플리케이션 실행 시점에 테이블을 삭제한 후 재생성하지 않으며 엔티티와 테이블이
정상적으로 되어 있는지만 확인합니다. 엔티티를 추가가 필요할 경우 create와 validate를 번갈아 가면서 사용하면 조금 편하게 개발을 진행할 수 있습니다.
application.properties :`spring.jpa.hibernate.ddl-auto=validate`, application-test.properties : `spring.jpa.hibernate.ddl-auto=create`
- 이미지 파일을 등록할 때 서버에서 각 파일의 최대 사이즈와 한번에 다운 요청할 수 있는 파일의 크기를 지정할 수 있습니다.
    * 파일 한 개당 최대 사이즈 `spring.servlet.multipart.maxFileSize=20MB`
    * 요청당 최대 파일 크기 `spring.servlet.multipart.maxRequestSize=100MB`

- 웹 브라우저에 입력하는 url에 `/images`로 시작하는 경우 uploadPath에 설정한 폴더를 기준으로 파일을 읽어오도록 설정합니다.
```java
package com.shop.config;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebMvcConfig implements WebMvcConfigurer {

    @Value("${uploadPath}")
    String uploadPath;

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/images/**")
                .addResourceLocations(uploadPath);
    }
}
```
