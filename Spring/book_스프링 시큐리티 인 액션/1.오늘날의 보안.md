> 출처 : 스프링 시큐리티 인 액션 : 보안 기초부터 OAuth 2까지, 스프링 시큐리티를 활용한 안전한 앱 설계와 구현

# 1. 오늘날의 보안
## 1.1 스프링 시큐리티: 개념과 장점
- 공식 웹사이트(https://spring.io/projects/spring-security)에서 스프링 시큐리티를 인증과 접근 제어를 위해 세부적인 맞춤 구성이 가능한 강력한 프레임워크라고 소개하고 있는데, 
개인적으로는 스프링 애플리케이션에 보안을 적용하는 과정을 크게 간소하하는 프레임워크라고 말하고 싶다.

## 1.2 소프트웨어 보안이란?

## 1.3 보안이 중요한 이유는 무엇인가?
## 1.4 웹 애플리케이션의 일반적인 보안 취약성
- 취약성을 공부하기 좋은 출발점으로 OWASP(https://www.owasp.org)라고도 하는 오픈 웹 애플리케이션 보안 프로젝트가 있다.
- 다음은 알고 있어야 할 일반적인 취약성의 목록이다.
    * 인증 취약성
    * 세션 고정
    * XSS(교차 사이트 스크립팅)
    * CSRF(사이트 간 요청 위조)
    * 주입
    * 기밀 데이터 노출
    * 메서드 접근 제어 부족
    * 알려진 취약성이 있는 종속성 이용

### 1.4.1 인증과 권한 부여의 취약성
- *인증(Authentication)* 은 애플리케이션이 이를 이용하는 사람을 식별하는 프로세스를 말한다.
- *권한부여(Authorizaion)* 는 인증된 호출자가 특정 기능과 데이터에 대한 이용 권리가 있는지 확인하는 프로세스다.

### 1.4.2 세션 고정이란?
- *세션고정(Session fixation)* 취약성은 웹 애플리케이션의 더 구체적이고 심각한 약점이다. 이 취약성이 존재하면 공격자는 이미 생성된 세션 ID를 재이용해 유효한 사용자를 가장할 수 있다.
- 이 취약성은 웹 애플리케이션이 인증 프로세스 중에 고유한 세션 ID를 할당하지 않아 기존 세션 ID가 재사용될 가능성이 있을 때 발생한다.

### 1.4.3 XSS(교차 사이트 스크립팅)란?
- *XSS(교차 사이트 스크립팅)* 는 서버에 노출된 웹 서비스로 클라이언트 쪽 스크립트를 주입해 다른 사용자가 이를 실행하도록 하는 공격이다.

### 1.4.4 CSRF(사이트 간 요청 위조)란?
- *CSRF(사이트 간 요청 위조)* 공격은 특정 서버에서 작업을 호출하는 URL을 추출해 애플리케이션 외부에서 재사용할 수 있다고 가정한다.
서버가 요청의 출처를 확인하지 않고 무턱대고 실행하면 다른 모든 곳에서 요청이 실행될 수 있다.

### 1.4.5 웹 애플리케이션의 주입 취약성 이해
- *주입(Injection)* 공격에서 공격자는 시스템에 특정 데이터를 유입하는 취약성을 이용한다. 공격의 목표는 시스템에 피해를 주고, 원치 않는 방법으로 데이터를 변경하거나
원래는 접근할 수 없는 데이터를 검색하는 것이다.
- 주입 공격은 시스템에 피해를 가할 목적의 클라이언트 쪽 스크립트를 주입한다. 다른 예로는 SQL 주입, XPath  주입, OS 명령 주입, LDAP 주입 등 여러가지가 있다.

### 1.4.6 민감한 데이터의 노출 처리하기
- 실제 개발된 시스템에서는 모든 환경에서 이러한 민감함 키 값을 볼 수 없어야 하고 적어도 운영 환경에서는 소수의 사람만 개인 데이터에 접근할 수 있어야 한다.

### 1.4.7 메서드 접근 제어 부족이란?
- 애플리케이션 수준에도 한 계층에만 권한 부여를 적용하면 안 된다. 때에 따라서는 특정 기능을 아예 호출할 수 없게 해야한다.
- 리포지토리만 아니라 애플리케이션의 모든 계층에 권한 부여를 적용해야 한다.

### 1.4.8 알려진 취약성이 있는 종속성 이용
- 소프트웨어를 개발할 때는 알려진 취약성이 있는 종속성을 이용하지 않도록 필요한 모든 조치를 취해야 한다. 이러한 의존성을 사용한 것이 발견되면 이를 빨리 수정하는 것은 물론
취약성이 이미 애플리케이션에서 악용되었는지 조사하고 필요한 조치를 해야한다.


## 1.5 다양한 아키텍처에 적용된 보안
### 1.5.1 일체형 웹 애플리케이션 설계
- CSRF 이 취약성을 완화하는 가장 쉬운 방법은 CSRF 방지 토큰을 이요하는 것이다. 다행이 이 기능은 스프링 시큐리티에 기본적으로 들어있고 CSRF 보호와 원점 CORS의 검증도 기본적
으로 활성화 되어 있다. 

### 1.5.2 백엔트/프런트엔드 분리를 위한 보안 설계
- 일반적으로 서버 쪽 세션을 줄이고 클라이언트 쪽 세션으로 대체하는 것이 좋다.

### 1.5.3 OAuth2 흐름 이해
- 백엔드에 요청할 때 마다 자격증명을 다시 전송하고 자격 증명을 클라이언트 쪽에 저장하는 것은 분명 좋지 않은 방법이며, OAuth2 흐름으로 인증과 권한 부여를 구현하는 것이 
더 나은 방법이다.
- OAuth2 프레임워크는 권한 부여서버와 리소스 서버라는 두 가지 별도의 엔티티를 정의한다. 
- 토큰을 관리하는 가장 좋은 방법은 무엇일까?
  * 앱의 메모리에 토큰 유지
  * 데이터베이스에 토큰 유지
  * JWT(JSON 웹 토큰)를 통한 암호화 서명
  
### 1.5.4 API 키, 암호화 서명, IP 검증을 이용해 요청 보안
- 예를 들어 백엔드를 서비스의 그룹으로 배포하거나 시스템 외부의 다른 백엔드를 이용하는 경우와 같이 구성 요소간의 메세지를 어떤 방식으로든 검증하고 싶을 수 있다.
여기에는 몇 가지 사례가 있다.
  * 요청 및 응답 헤더에 정적 키 이용
  * 암호화 서명으로 요청 및 응답 서명
  * IP 주소에 검증 적용
  
## 1.6 이 책에서 배울 내용
