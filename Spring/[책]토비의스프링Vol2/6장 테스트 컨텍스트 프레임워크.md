> 출처 : 토비의 스프링 3.1 Vol. 2 읽으면서 정리

# 6장 테스트 컨텍스트 프레임워크
## 6.1 테스트 컨텍스트 프레임워크
스프링은 테스트에 사용되는 애플리케이션 컨텍스트를 생성하고 관리하고 테스트에 적용해주는 기능을 가진 테스트 프레임워크를 제공한다.
이를 테스트 컨텍스트 프레임워크라고 부른다.
### 6.1.1 테스트 프레임워크와 컨텍스트 테스트
자바에서 가장 많이 사용되는 테스트 프레임워크로는 JUnit과 TestNG가 있다. 
JUnit4 기준으로 설명

- 테스트용 애플리케이션 컨텍스트 캐싱과 설정파일    
    테스트 메소드에 @Test라는 애노테이션만 붙여주면 메소드가 속한 클래스트 테스트 클래스가 되며, 
    @Test가 붙은 모든메소드가 각각 하나의 독립적인 테스트가 된다.   
    테스트 컨텍스트 프레임 워크를 적요하려면 테스트 클래스에 두가지 애노테이션을 부여해줘야한다.

    ```java
    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration("/test-applicationContext")
    public class Test2 { ... }
    ```

- 컨텍스트 설정의 상속과 컨텍스트 로더
    컨텍스트 파일 정보는 상속된다. 따라서 서브클래스의 컨텍스트 파일 정보는 슈퍼클래스에서 정의된 것까지 포함된다.
    
### 6.1.2 테스트 코드의 테스트 컨텍스트 활용
- 테스트 컨텍스트로부터 DI 받기
    테스트 클래스는 테스트 컨텍스트로부터 애플리케이션 컨텍스트와 그에 담긴 빈을 제공받아 테스트 코드에서 사용한다.

- 공유 컨텍스트 사용 시 주의할 점
    @DirtiesContext 애노테이션이 붙은 테스트가 수행되고 나면 스프링은 현 테스트 컨텍스트를 강제로 제거한다.
    
## 6.2 트랜잭션 지원 테스트
### 6.2.1 테스트의 트랜잭션 지원 필요성
테스트용 설정파일에 테스트에 사용할 DB를 지정한 DataSource를 등록해주는 정도면 준비는 충분하다.

- DAO 단독 테스트
- 롤백 테스트

### 6.2.2 트랜잭션 지원 테스트 작성 방법
- 트랜잭션 매니저
- @Transactional 테스트
- ORM 롤백 트랜잭션 테스트의 주의사항
- 트랜잭션 지원 테스트에 DBUnit 이용하기
    
## 6.3 스프링 3.1의 컨텍스트 테스트 프레임워크
### 6.3.1 자바 코드 설정정보와 프로파일 활용
- @Configuration 클래스 테스트

## 6.4 정리
- 테스트 컨텍스트 프레임워크를 사용하면 컨텍스트 캐싱을 통해 테스트 성능을 향상시킬 수 있다.
- 테스트 컨텍스트 정보는 상속도 가능하다.
- DAO를 단독으로 테스트 하거나 테스트 작업이 다른 테스트에 영향을 주기 않기 위해서는 롤백 테스트로 만들어야 한다.