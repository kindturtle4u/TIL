> 출처 : 토비의 스프링 3.1 Vol.1 읽으면서 정리

# 3장 템플릿
템플릿이란 이렇게 바뀌는 성질이 다른 코드 중에서 변경이 거의 일어나지 않으며 일정한 패턴으로 유지되는
특성을 가진 부분을 자유롭게 변경되는 성질을 가진 부분으로부터 독립시켜서 효과적으로 활용할 수 있도록 하는 방법이다.

## 3.1 다시보는 초난감 DAO
### 3.1.1 예외처리 기능을 갖춘 DAO
리소스 반환과 close()  
- Connection 이나 PreparedStatement에는 close() 메소드가 있다.
- 리소스를 반환 한다는 의미로 이해하는 것이 좋다.
- 보통풀(Pool)방식으로 운영된다.
- 사용한 리소스는 빠르게 반환해야한다. 그렇지 않으면 풀에 있는 리소스가 고갈되고 결국 문제가 발생한다.
- close()메소드는 사용한 리소스를 풀로 다시 돌려주는 역할을 한다.

## 3.2 변하는 것과 변하지 않는 것
### 3.2.1 JDBC try/catch/finally 코드의 문제점
### 3.2.2 분리와 재사용을 위한 디자인 패턴 적용
    
## 3.3 JDBC 전략 패턴의 최적화
### 3.3.1 전략 클래스의 추가 정보
### 3.3.2 전략과 클라이언트의 동거

중첩 클래스(nested class)의 종류  
- 스태틱 클래스 (static class)
- 내부 클래스 (inner class)
- 멤버 내부 클래스(member inner class)
- 로컬 클래스(local class) - 클래의 메소드 내부에 정의하는것
- 익명 내부 클래스(anonymous inner class) - 범위는 선언된 위치에 따라서 다르다.

## 3.4 컨텍스트와 DI
### 3.4.1 JdbcContext의 분리
### 3.4.2 JdbcContext의 특별한 DI

## 3.5 템플릿과 콜백
복잡하지만 바뀌지 않는 일정한 패턴을 갖는 작업 흐름이 존재하고 그중 일부분만 자주 바꿔서 사용해야 하는 경우 적합한 구조
이런 방식을 스프링에서는 템플릿/콜백 패턴이라고 부른다.
전략패턴의 컨텍스트를 템플릿이라고 부르고 , 익명 내부 클래스로 만들어지는 오브젝트를 콜백이라고 부른다.

### 3.5.1 템플릿/콜백의 동작원리
템플릿은 고정된 작업 흐름을 가진 코드를 재사용한다는 의미에서 붙인 이름이다.
콜백은 템플릿 안에서 호출되는 것을 목적으로 만들어진 오브젝트를 말한다.

### 3.5.2 편리한 콜백의 재활용
### 3.5.3 템플릿/콜백의 응용
템플릿과 콜백을 찾아낼 때는, 변하는 코드는 경계를 찾고 그 경계를 사이에 두고 주고 받는 일정한 정보가 있는지 확인하면 된다.

## 3.6 스프링의 JdbcTemplate
### 3.6.1 update()
### 3.6.2 queryForInt()
### 3.6.3 queryForObject()
### 3.6.4 query()
### 3.6.5 재사용 가능한 콜백의 분리

## 3.7 정리
JDBC와 같은 예외가 발생할 가능성이 있으며 공유 리소스의 반환이 필요한 코든느 반드시 try/catch/finally 블럭으로 관리해야 한다.

일정한 작업 흐름이 반복되면서 그중 일부 기능만 바뀌는 코드가 존재한다면 전략 패턴을 적용한다.
바뀌지 않는 부분은 컨텍스트로, 바뀌는 부분은 전략으로 만들고 인터페이스를 통해 유연하게 전략을 변경할 수 있도록 한다.

    
    



  




    






          




