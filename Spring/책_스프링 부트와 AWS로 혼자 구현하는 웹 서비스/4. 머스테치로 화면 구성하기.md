> 출처 :  스프링 부트와 AWS로 혼자 구현하는 웹 서비스읽으면서 정리

# 4. 머스테치로 화면 구성하기
## 4.1 서버 템플릿 엔진과 머스테치 소개
흔히 이야기하는 Vue.js나 React.js를 이용한 SPA는 브라우저에서 화면을 생성합니다.
즉, 서버에서 이미 코드가 벗어난 경우입니다.
서버에서 Json혹은 Xml형식의 데이터만 전달하고 클라이언트에서 조립합니다.

물론, 최근에 리액트나 뷰와 같은 자바스크립트 프레임워크에서 서버사이트렌더링을  지원하는 모습을 볼 수 있습니다
자바스크립트의 화면 생성 방식을 서버에서 실행하는 것을 이야기합니다.
이는 V8 엔진 라이브러리들이 지원하기 때문이며, 스프링부트에서 사용할 수 있는 대표적인 기술들로는 
Nashorn,J2V8이 있습니다.

### 머스테치란
머스테치(http://mustache.github.io/)는 수 많은 언어를 지원하는 가장 심플한 템플릿 엔진입니다.

현존하는 대부분 언어를 지원하고 있습니다. 그러다 보니 자바에서 사용될 때는 서버 템플린엔진으로,
자바스크립트에서 사용될때는 클라이언트 템플릿 엔진으로 모두 사용할 수 있습니다.

- JSP,Velocity : 스프링부트에서는 권장하지 않는 템플릿 엔진입니다.
- Freemarker: 템플릿엔진으로는 너무 과하게 많은 기능을 지원합니다. 높은 자유도로인해 숙련도가 낮을수록
Freemarker안에 비즈니스 로직이 추가될 확률이 높습니다.
- Thymeleaf: 스프링 진영에서 적극적으로 밀고 있지만 문법이 어렵습니다.

#### 머스테치의 장점
- 문법이 다른 템플릿 엔진보다 심플합니다.
- 로직 코드를 사용할 수 없어 View의 역할과 서버의 역할이 명확하게 분리됩니다.
- Mustache.js와 Mustache.java 2가지가 다 있어, 하나의 문법으로 클라이언트/서버 템플릿을 모두 사용가능합니다.

## 4.2 기본 페이지 만들기
## 4.3 게시글 등록 화면 만들기
스프링 부트는 기본적으로 src/main/resources/static에 위치한
자바스크립트, CSS, 이미지등 정적파일은 URL에서 / 로 설정됩니다.

src/main/resources/static/js/... (http://도메인/js/...)  
src/main/resources/static/css/... (http://도메인/css/...)  
src/main/resources/static/image/... (http://도메인/image/...)  

## 4.4 전체 조회 화면 만들기
#### {{posts}}
- posts 라는 List를 순회합니다.
- Java의 for문과 동일하게 생각하면 됩니다.
#### {{id}} 등의 {{변수명}}
- List에서 뽑아낸 객체의 필드를 사용합니다.

#### 참고
규모가 있는 프로젝트에서의 데이터 조회는 FK의 조인, 복잡한 조건 등으로 인해
이런 Entity 클래스만으로 처리하기 어려워 조회용 프레임워크를 추가로 사용합니다.
대표적 예로 querydsl, jooq, MyBatis 등이 있습니다. 조회는 위 3가지 프레임워크중 하나를
통해 조회하고, 등록/수정/삭제 등은 SpringDataJpa를 통해 진행합니다. 개인적으로는 querydls를 추천합니다.

Querydsl을 추천하는 이유  
- 1. 타입안정성이 보장됩니다.
- 2. 국내 많은 회사에서 사용 중입니다.
- 3. 레퍼런스가 많습니다.



