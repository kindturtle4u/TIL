> 출처 :  모두의 리눅스 읽으면서 정리 

# 19. 버전관리 시스템
## 19.1 버전 관리 시스템이란
## 19.2 깃 설치와 초기 설정
- 설치된 깃의 버전 확인: `git --version`
- yum으로 깃 설치(CentOS): `yum install git-core`
- apt-get으로 깃 설치(우분투): `sudo apt-get install git-core`

### 19.2.1 깃 초기 설정
- 깃을 설치한후에는 먼저 이름과 메일 주소를 설정해야 합니다.
```shell
$ git config --global user.name 'namsangjae'
$ git config --global user.email 'kindturtle4u@gmail.com'
```
- 컬러 출력 설정: `git config --global color.ui auto`
- 깃 설정 확인
```shell
$ cat ~/.gitconfig
[user]
	name = namsangjae
	email = kindturtle4u@gmail.com
[color]
	ui = auto
```

## 19.3 기본적인 사용법
### 19.3.1 리포지터리 작성하기
- 새로운 디렉터리 생성: `mkdir -p ~/git/findgrep`
- 디렉터리에서 깃 초기화
```shell
$ cd ~/git/findgrep
$ git init
```
- git init을 실행하면 초기화되어 `.git`이라는 디렉터리가 만들어집니다. `.git` 디렉터리가 깃 리포지터리의 실체입니다.
- 리포지터리(repository)란 깃이 관리하는 파일의 이력을 보존하는 공간을 의미합니다. 파일 수정 이력은 전부 이 리포지터리에 기록됩니다.
- 깃 디렉터리 구성 예
  * `~/git/findgrep/.git/`: 리포지터리
  * `~/git/findgrep/`: 작업트리 (작업트리에서 파일을 추가, 편집, 삭제 하면서 작업을 진행하면 됩니다)
  
### 19.3.2 리포지터리에 파일 추가하기
- 버전 고나리할 파일 작성
```shell
$ touch findgrep-19.sh
$ chmod 755 findgrep-19.sh
$ vim findgrep-19.sh
```
- `git add`: 깃이 관리할 파일을 추가하는 명령어입니다.
- `git commit`: 실제 리포지터리에 변경이력을 추가 하는 명령어인데, 이때 `-m` 옵션을 지정하면 이번 변경 사항에 대한 메시지를 입력할 수 있습니다.
- 이처럼 어느 시점에서의 프로젝트 상태를 리비전(revision) 혹은 커밋(commit)이라 합니다. 그리고 새로운 리비전을 리포지터리에 등록하는 것을 커밋한다라고 합니다.


### 19.3.3 차이 표시 그리고 다시 커밋하기
- 파일을 수정한디 한번더 커밋해보겠습니다.
- `git status`는 현재 작업 트리의 상태를 표시해줍니다.
```shell
현재 브랜치 master
커밋하도록 정하지 않은 변경 사항:
  (무엇을 커밋할지 바꾸려면 "git add <파일>..."을 사용하십시오)
  (use "git restore <file>..." to discard changes in working directory)
	수정함:        findgrep-19.sh

커밋할 변경 사항을 추가하지 않았습니다 ("git add" 및/또는 "git commit -a"를 사용하십시오)
```
- `git diff`: 변경 사항을 확인
```shell
$ git diff
diff --git a/findgrep-19.sh b/findgrep-19.sh
index 2e5c91d..c9c1869 100755
--- a/findgrep-19.sh
+++ b/findgrep-19.sh
@@ -1,4 +1,10 @@
 #!/bin/bash

 pattern=$1
-find . -type f | xargs grep -nH "$pattern"
+directory=$2
+
+if [ -z "$directory"]; then
+    directory='.'
+fi
+
+find "$directory" -type f | xargs grep -nH "$pattern"
```
- 두 번째 커밋을 수행
  * `git add findgrep-19.sh`: 파일추가
  * `git commit`: `-m` 옵션없이 git commit을 실행하면 로그 메시지를 입력하기 위해 에디터가 실행됩니다.

### 19.3.4 변경 이력 확인하기
- `git log` 명령어로 변경이력을 확인합니다.
```shell
git log
commit 80c30732472707d122b36b50c70545e98de2f319 (HEAD -> master)
Author: namsangjae <kindturtle4u@gmail.com>
Date:   Mon Jan 2 02:16:46 2023 +0000

    파일 검색을 위한 디렉터리 지정가능하도록 수정

    디렉터리를 이동하지 않아도 임의의 디렉터리에서 파일을 검색할 수 있도록 수정

commit 67a374110a028d35898d95095104a87235c26a10
Author: namsangjae <kindturtle4u@gmail.com>
Date:   Mon Jan 2 02:00:54 2023 +0000

    findgrep-19.sh 신규등록
```
- commit으로 시작하는 행에는 40글자의 문자열이 포함되어 있습니다. 이는 커밋 오브젝트명으로 커밋 하나를 특정하기 위한 키에 해당합니다.
- `git log`를 실행할 때 `-p` 옵션을 지정하면 커밋별로 차이점을 함께 표시합니다.
```shell
$ git log -p
commit 80c30732472707d122b36b50c70545e98de2f319 (HEAD -> master)
Author: namsangjae <kindturtle4u@gmail.com>
Date:   Mon Jan 2 02:16:46 2023 +0000

    파일 검색을 위한 디렉터리 지정가능하도록 수정

    디렉터리를 이동하지 않아도 임의의 디렉터리에서 파일을 검색할 수 있도록 수정

diff --git a/findgrep-19.sh b/findgrep-19.sh
index 2e5c91d..c9c1869 100755
--- a/findgrep-19.sh
+++ b/findgrep-19.sh
@@ -1,4 +1,10 @@
 #!/bin/bash

 pattern=$1
-find . -type f | xargs grep -nH "$pattern"
+directory=$2
+
+if [ -z "$directory"]; then
+    directory='.'
+fi
+
+find "$directory" -type f | xargs grep -nH "$pattern"

commit 67a374110a028d35898d95095104a87235c26a10
Author: namsangjae <kindturtle4u@gmail.com>
Date:   Mon Jan 2 02:00:54 2023 +0000

    findgrep-19.sh 신규등록

diff --git a/findgrep-19.sh b/findgrep-19.sh
new file mode 100755
index 0000000..2e5c91d
--- /dev/null
+++ b/findgrep-19.sh
@@ -0,0 +1,4 @@
+#!/bin/bash
+
+pattern=$1
+find . -type f | xargs grep -nH "$pattern"
```
- 커밋 오브젝트명을 지정할 때 커밋 하나를 구별할 수 있다면 40글자를 전부 지정하지 않아도 됩니다. 보통 첫 7글 정도로 커밋하나를 지정할
수 있습니다. `git diff 137be16`
- 깃 기본 명령어
  * `git init`: 리포지터리 생성
  * `git add`: commit 대상으로 등록
  * `git commit`: commit 수행
  * `git status`: 작업 트리의 상태 출력
  * `git diff`: 차이 표시
  * `git log`: 이력 표시

## 19.4 작업 트리와 인덱스
