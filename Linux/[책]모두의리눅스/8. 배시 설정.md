> 출처 :  모두의 리눅스 읽으면서 정리 

# 8. 배시 설정
## 8.1 alias
- 리눅스에서는 명령어에 별칭을 붙일 수 있습니다. 
- alias 설정: `alias <이름>='<명령어>'`
- ls에 자주 사용되는 별칭
  * `alias la='ls -a'`: 모든 파일을 출력하는 la 명령어
  * `alias ll='ls -l'`: 파일의 상세 정보를 출력하는 ll 명령어
- rm 명령어 같은 경우에는 지우기 전에 항상 확인하도록 하기 위해 -i 옵션을 붙여 별칭을 설정하기도 합니다.
  * `alias rm='rm -i'`
  * `alias cp='cp -i'`
  * `alias mv='mv -i'`

### 8.1.1 alias 확인과 삭제
- 어떤 명령어가 별칭인지 아닌지를 확인하기 위해서 type 명령어를 사용합니다.
```shell
$ type ls
ls는 'ls -F'의 별칭임

$ type cp
cp는 해시됨 (/usr/bin/cp)
```
- 설정한 별칭을 지우려면 unalias라는 명령어를 사용합니다. `unalias ls`

### 8.1.2 alias를 일시적으로 무효화하기
- 전체 경로의 명령어 입력: `/bin/ls`
- command 명령어 사용: `command ls`
- \를 사용: `\ls`

## 8.2 배시의 옵션
- 배시의 여러가지 옵션 기능은 set 명령어나 shopt 명령어를 사용하여 활성화하거나 비활성화 할 수 있습니다.
- 그리고 배시의 옵션 기능 중에는 셸 스크립트를 사용할 때만 의미가 있는 기능이 있습니다. 이러한 기능에 대해서는 17장에서 셸 스크립트를
배우고 난 뒤 다시 살펴보겠습니다.

### 8.2.1 set 명령어
- set 명령어에는 `-o`나 `+o`를 지정하여 옵션 기능을 활성화하거나 비활성화 할 수 있습니다. `set -o/+o <옵션 이름>`
- `-o`를 지정하면 기능이 활성화되고, `+o`를 지정하면 비활성화 됩니다.
- ignoreeof 기능 활성화 `set -o ignoreeof`: ignoreeof를 활성화하면 `Ctrl + C`를 입력해도 셸이 종료되지 않습니다.
- set 명령어로 지정 가능한 옵션
  * ignoreeof: `Ctrl + c`로 인한 셸 종료를 방지
  * noclobber: 이미 존재하는 파일을 리다이렉트(redirect)로 덮어쓰지 않음
  * noglob: 경로 확장을 무효로 함. *등을 셸에서 확장하지 않음

### 8.2.2 shopt 명령어
- shopt 명령어도 set 명령어와 동일하게 배시의 옵션 기능을 활성화 하거나 비활성화 하는 명령어 입니다.
- 배시 옵션 기능 설정 `shopt -s/-u <옵션이름>`
- `-s`를 지정하면 활성화되고 `-u`를 지정하면 비활성화 됩니다.
- set 명령어와 shopt 명령어로 지정할 수 있는 옵션의 이름은 다릅니다.
- shopt 명령어로 지정 가능한 옵션
  * `autocd`: 디렉터리 이름을 입력하면 해당 디렉터리로 이동함
  * `dotglob`: `*`나 `?`를 사용한 경로 확장의 결과애 `.`으로 시작하는 파일도 포함시킴
  * `cpspell`: cd 명령어 실행 시 디렉터리 이름의 오타를 자동 교정
  * `globstar`: 경로 확장으로 `**`라는 패턴을 사용하면 서브 디렉터리까지 포함한 모든 파일에 매치됨
  * `histappend`: 배시를 종료할 때 히스토리 파일에 명령어 이력을 덮어쓰지 않고 추가함
- shopt는 비교적 최근에 등장한 명령어로 set 명령어에 비해 참고 자료가 다소 부족합니다. 하지만 설정 가능한 기능이 풍부하여 상세하게
배시를 설정할 수 있습니다.

## 8.3 셸 변수
- 셸 변수에는 숫자나 문자열 등의 값을 저장할 수 있습니다. 배시에는 특별한 의미로 사용되는 셸 변수가 몇 가지 있습니다. 이들 변수의 값을
설정하면 좀 더 편리하게 셸을 사용할 수 있습니다.

### 8.3.1 변수 설정
- 셸 변수 설정 `<변수명>=<값>`
- 여기서 값에 공백을 포함해야 하는 경우에는 작은 따옴표나 큰따옴표로 깜싸줘야 합니다.
- 셸 변수 var1에 값을 설정 `var1='test variable'`
- 셸 변수 var의 값을 확인 `echo $var1`
- 변수에 값을 설정할 때 = 양 옆에 공백이 들어가서는 안됩니다. 봉백이 있으면 변수명이 명령어로 인식되어 에러가 됩니다.

### 8.3.2 PS1: 프롬프트 설정
- 프롬프트는 커맨드 라인의 앞부분에 표시되는 기호를 의미합니다. 셸의 프롬프트를 바꾸기 위해서는 다음과 같이 셸 변수 PS1의 값을 바꾸면됩니다.
- 프롬프트에서 사용할 수 있는 기호
  * `\d`: 현재 날짜(요일, 월, 일 형식)
  * `\h`: 서버의 호스트 이름
  * `\H`: 서버의 도메인 이름
  * `\n`: 개행문자(줄바꿈)
  * `\t`: HH:MM:SS 형식으로 24시간 단위의 현재 시각 표시
  * `\u`: 사용자 이름
  * `\w`: 현재 디렉터리의 전체 경로 표시
  * `\W`: 현재 디렉터리의 전체 경로 중 마지막 디렉터리만 표시
  * `\$`: 현재의 사용자가 root 사용자이면 #, 그 외에는 $를 표시
  * `\\`: \ 문자 자체를 표시

### 8.3.3 PATH: 명령어를 찾는 경로
- 셸 변수 PATH에는 명령어의 위치를 찾는 디렉터리가 저장되어있습니다. 이 번수에 명령어를 찾을 디렉터리를 콜론(:)으로 구분해 설정하면 됩니다.
```shell
$ echo $PATH
/home/ec2-user/.local/bin:/home/ec2-user/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin
```
- 본인이 작성한 명령어를 `~/bin` 디렉터리에 배치한다고 하면 다음과 같이 PATH에 추가해주면 됩니다.

### 8.3.4 LANG: 로케일
- 리눅스를 설치할 때 한국어를 선택했으면 배시의 에러 메시지 등이 한글로 표시됩니다. 이는 언어, 나라, 지역을 특정하기 위한 식별자인 로케일(locale)이
설정되어 있었기 때문입니다. 언어나 날짜의 표시 방식은 로케일 값에 따라 변합니다.
- 현재 사용 중인 로케일은 LANG이라는 셸 변수에 저장됩니다.
```shell
$ echo $LANG
ko_KR.UTF-8
```
- 시스템에 적용 가능한 로케일 일람 확인 `locale -a`
- 로케일 변경: `LANG=en_US.UTF-8`

### 8.3.5 그 외의 셸 변수
- `HISTFILE`: 커맨드 라인 이력을 저장할 파일이름. 기본값은 `~/.bash_history`
- `HISTFILESIZE`: 파일에 저장할 커맨드 라인 이력의 최대 개수
- `HISTSIZE`: 메모리에 저장할 커맨드라인 이력 최대 개수

- 다음 셸 변수로 셰을의 현재 상태를 확인할 수 있습니다. 이들 변수 값은 셸이 자동으로 설정해 줍니다.
- `HOME`: 홈 디렉토리
- `SHELL`: 로그인 셸의 경로
- `PWD`: 현재 디렉터리

- 더 많은 배시 셸 변수에 대한 정보는 배시의 매뉴얼에서 Shell Variables를 참고하기 바랍니다.

## 8.4 환경 변수
- 명령어 중에는 파일 시스템에 실행 파일로 존재하는 외부명령어가 있고, 셸 자체에 포함된 내장 명령어가 있습니다.
어떤 명령어가 내장 명령어인지 외부 명령어인지 알기 위해서는 type 명령어를 사용하면 됩니다.
```shell
$ type set 
set는 쉘 내장임
$ type cp
cp는 /usr/bin/cp임
```
- 여기서 외부 명령어는 셸 외부에서 실행됩니다. 그래서 셸 변수를 참고할 수 없습니다. 하지만 LANG에 설정된 로케일과 같이 외부 명령어에서도
참고하면 좋을 변수들이 있습니다. 이처럼 외부 명령어에서도 값을 참조할 수 있는 변수를 환경변수라고 합니다.

### 8.4.1 printenv 명령어: 환경 변수 표시
- 현재 셸에 설정된 환경 변수를 출력하기 위해서는 `printenv`명령어를 사용합니다.

### 8.4.2 export 명령어: 환경 변수 설정
- 환경 변수를 설정하려면 export 명령어를 사용해야 합니다.
- `export <셸 변수 이름>`: 지정한 셸 변수를 환경 변수로 설정
- export 명령어를 사용할 때 다음과 같이 한 행으로 환경 변수를 설정하는 것도 가능합니다. `export LESS='--no-init'`
