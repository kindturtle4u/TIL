> 출처 :  리눅스마스터 2급 한권으로 끝내기 읽으면서 정리 

# 2. 리눅스의 설치
## 2.1 리눅스 설치 및 유형
### 2.1.1 배포판 다운로드
- 배포판
  * 리눅스에서 작동하는 여러 종류의 프로그램을 꾸러미(package)로 모아 놓은것을 말한다. 
  * 리눅스 커널에 구축된 Unix와 유사한 운영체제 제품군의 요소이다.
   이러한 배포판은 워드프로세서, 스프레드시트, 미디어 플레이어 및 데이터베이스 응용 프로그램과 같은 대규모 소프트웨어 응용 프로그램 모음으로 구성된다.
- 임베디드(Embedded) 

### 2.1.2 리눅스 설치 유형
- 최소: 필수 패키지만 설치
- 데스크톱(Desktop): 개인용 컴퓨터에 적합한 패키지 설치
- 서버(Server):
  * Basic 서버: 서버 운영 관련 필수 패키지 설치
  * Web 서버: 아파치 서버 관련 패키지 설치
  * FTP 서버: 파일 전송 서버 관련 패키지 설치
  * DB 서버: 데이터베이스 서버 관련 패키지 설치
- 랩톱(Laptop): 노트북 PC 관련 패키지 설치
- 가상호스트(Virtual Host): 가상화 시스템 관련 패키지 설치, 하이퍼바이저 소프트웨어(KVM,Xen) 설치
- Software Development Workstation: 소프트웨어 관리 도구를 포함한 패키지 설치, 소스 컴파일 도구를 포함한 패키지 설치
- 사용자 지정(Custom): 사용자에게 필요한 패키지를 직접 선택하여 설치

### 2.1.3 배포판 설치
- 사용자 지정 설치를 제외한 다른 설치 유형을 선택하게 되면 설치과정에서 자동으로 하드디스크를 재구성하므로 기존 자료는 모두 삭제된다.
- 중요한 자료는 리눅스를 설치 전에 모두 백업해야 한다.

#### 하드웨어 정보 파악
- 최근 리눅스 배포판들은 하드웨어 호환성이 뛰어나다. 플러그 앤 플레이(Plug and Play) 기능을 이용하여 자동으로 하드웨어를 검색한다.

## 2.2 리눅스 부트
### 2.2.1 부트 매니저(Boot Manager)
- 부트 매니저는 사용자의 PC에 다양한 운영체제를 설치하여 사용할 경우, 부팅할 때 사용자의 PC에 설치되어 있는 운영체제 중 필요로 하는
운영체제를 선택하여 부팅하는 기능이다.

### 2.2.2 리눅스 부팅 과정
- 1단계: ROM-BIOS 실행
  * POST(Power On Self Test) 과정을 수행 후 하드웨어 이상 유무를 검사한 후 에러가 발생할 경우 알림
  * 부트 로더 로딩
- 2단계: 부트 로더 실행
  * 부트 로더를 실행하여 커널을 로딩하고, 스와퍼 프로세스 호출
  * 'LILO'와 'GRUB'가 있음
- 3단계: 스와퍼 프로세스 실행
  * 장치들의 드라이버 초기화
- 4단계: 'init' 프로세스 실행
  * 'init'프로세스를 실행하여 '/etc/inittab' 파일 읽음
- 5단계: 부트 레벨 결정
- 6단계: 'rc.sysinit' 스크립트 실행
  * '/etc/rc.d/rc.sysinit' 스크립트를 실행하여 시스템 초기화 작업 수행
- 7단계: 'rcx.d' 스크립트 실행
  * '/etc/rcx.d' 스크립트를 실행하여 해당 부트 레벨 스크립트를 순차적으로 실행
- 8단계: X 윈도 실행
  * 부트 레벨이 '5'일 경우 X 윈도 환경으로 부팅

### 2.2.3 부트 로더(Boot Loader)
- '부트스트랩 로더(Bootstrap Loader)'의 약어이다.
- 컴퓨터를 사용자가 사용할 수 있도록 하드디스크에 저장된 운영체제를 주기억장치에 적재해 주는 프로그램이다.
- 운영체제가 실행되기 전에 미리 실행되어 커널이 안정적으로 실행되기 위한 모든 관련 작업을 완료하는 프로그램이다.
- 하나의 시스템에 여러개의 운영체제가 설치되어 있을 경우 선택하여 부팅할 수 있도록 한다(멀티 부팅)

#### 부트로더 종류 및 특징
- LILO(Linux Loader): 리눅스 운영체제에서만 사용 가능
- GRUB(Grand Unified Bootloader)
  * 리눅스 운영체제 외에도 사용가능
  * 'LILO'의 단점을 보완
  * 대화형이므로 커널의 경로와 이름만 알면 부팅 가능
  * 메뉴 설정 환경을 지원하며, 대화형 모드로 부트 정보를 설정 가능

#### GRUB

### 2.2.4 런 레벨(Run Level)
- 리눅스 부팅의 마지막 단계에서 모든 프로세스의 부모 프로세스인 'init'이 생성된다.
- 부팅 시 'init' 프로세스가 참조하는 것이 런 레벨이다.
- 런 레벨은 0에서 부터 6까지 있다.
#### 런 레벨 실행 스크립트 파일
- init.d: 여러 가지 서비스 데몬들을 시작하고 종료, 재시작하는 스크립트 파일들이 저장됨
- rc.local: 부팅 시 자동으로 명령어 스크립트를 수행하며, 일반적으로 시스템 부팅 시 자동 실행될 명령어를 추가하여 사용하는 스크립트 파일
- rc0.d~rc6.d: 'init'프로세스가 런 레벨을 결정하면 각각의 런 레벨에 맞는 서비스들을 실행해야 하는데, 이 때 각 런레벨별로 실행해야 하는 서비스들의 디렉터리
#### 런 레벨 운영 모드
- 0(Halt): 시스템 종료
- 1(Single User Mode): 단일 사용자 모드(CLI)
- 2(Multi User Mode Without Networking): 다중 사용자 모드(CLI) (네트워크 사용불기)
- 3(Multi User Mode Only Console Login): 다중 사용자 모드(CLI)
- 4(Not Used): 사용하지 않음
- 5(Multi User Mode With Display Manager): 다중 사용자 모드(GUI, X 윈도)
- 6(Reboot): 재시작

### 2.2.5 로그인 및 로그아웃
#### 로그인 및 로그아웃 환경
- 'GUI(X 윈도)' 환경에서 로그인/로그아웃
- 'CLI(Command Line Interface)' 환경에서 로그인/로그아웃

#### 로그인
- '/etc/passwd' 파일 비교 후 일치하면 로그인을 허용한다.
- 로그인 메세지 출력
  * `/etc/issue`: 로컬 접속시 메세지 출력(로그인전)
  * `/etc/issue.net`: 원격 접속시 메세지 출력(로그인전)
  * `/etc/motd`: 로컬, 원격 접속 시 로그인 성공 후 메세지 출력(로그인후)

#### 로그아웃
- 로그아웃을 실행하기 위한 명령어이다(logout, exit)
- Ctrl + D 키를 입력한다.
- 자동로그아웃 설정(일정 시간 지난 후)
  * `/etc/profile` 파일의 export TMOUT=300 (300초 후에 자동 로그아웃)

### 2.2.6 시스템 종료 명령어
#### shutdown
- 시스템을 종료하거나 재시작하는 명령어이다.
- 현재 실행중인 프로세스나 저장되지 않은 데이터를 안전하게 디스크에 저장하고, 모든 파일 시스템을 umount 시킨 후 시스템을 종료한다.
- `shutdown [옵션][시간][경고메세지]`
- 옵션
  * `-c`: 예약된 종료 명령을 취소
  * `-h`: 시스템을 안전하게 종료
  * `-k`: 종료 명령을 수행하지 안혹 메시지만 전달
  * `+m`: 'm'분 후에 시스템 종료
  * `-P`: 시스템 강제 종료
  * `-r`: 시스템 재시작
  * `-t`: 지정 시간에 시스템을 종료하거나 재시작
- 활용
  * `shutdonw -h now` 즉시 시스템 종료
  * `shutdown -h +5` 5분 후에 시스템 종료
  * `shutdown -h 18:00` 18시에 시스템 종료
  * `shutdown -r now` 즉시 시스템 재시작
  * `shutdown -r +5` 5분 후에 시스템 재시작
  * `shutdown -r 18:00` 18시에 시스템 재시작

#### init
- 시스템을 종료하거나 재시작하는 명령어이다.
- `init [런레벨]`
- 활용
  * `init 0` 시스템 종료
  * `init 6` 시스템 재시작

#### halt
- 시스템을 종료하는 명령어이다. `halt [옵션]`
- 활용
  * `halt` 모든 프로세스는 종료되지만 전원(power)은 꺼지지(off)않는다.
  * `halt -f` 모든 프로세스가 종료되고 전원(power)도 꺼진다.

#### poweroff
- 시스템을 종료하는 명령어이다. `poweroff`


### 2.2.7 시스템 재시작 명령어
#### reboot
- `reboot [옵션]`
- 활용
  * `reboot` 시스템 재시작
  * `reboot -f` 시스템 강제 재시작

## 2.3 파일 시스템과 파티션
### 2.3.1 파일 시스템
- 컴퓨터에서 데이터를 기록하기 위해서는 미리 하드디스크의 데이터를 읽고, 쓰고, 검색을 위한 준비를 해야한느데 파일 시스템은 그 준비의 규칙을 정리한것

#### 파일 시스템 기능
#### 파일 시스템 종류
- 리눅스: ext, ext2, ext3, ext4
- 저널링: JFS, XFS, ReiserFS
- 네트워크: SMB, CIFS, NFS
- 윈도: FAT, FAT32, VFAT, NTFS
- CD-ROM: iso9660
- 유닉스: HPFS, SysV
- 클러스터링: RedHat GFS, IBM GPFS, IBM SanFS, Compaq CFS, Oracle OCFS2

### 2.3.2 파티션
- 하나의 물리적인 디스크를 여러 개의 논리적인 디스크로 분할하는 것을 의미한다.
- 파티션 상태를 확인하는 파일: `/proc/patitions`

#### 종류
- 기본파티션(Primary Patition)
  * 하나의 하드디스크에 기본 파티션과 확장 파티션 모두 4개의 파티션까지 분할가능
  * 4개 이상의 파티션이 필요한 경우 확장 파티션 내에 논리 파티션을 만듦
- 확장파티션(Extended Partition)
  * 하드디스크를 여러 개의 파티션으로 나누고자 할 때 만드는 파티션
  * 논리 파티션을 만들 수 있게 하는 공간으로 디스크당 하나만 만들 수 있음
- 논리파티션(Logical Partition)
  * 4개 이상의 파티션을 사용하게 되는 경우 확장 파티션 내에 논리 파티션 생성
  * 하나의 하드디스크에서 논리 파티션의 수는 최대 12개까지 생성 가능
- 스왑 파티션(Swap Partition)
  * 하드디스크 일부를 주기억장치처럼 사용하는 가상기억장치
  * 리눅스 설치 시 반드시 필요한 영역
  * 기본 파티션 또는 논리 파티션에 생성
  * 스왑 영역의 크기는 일반적으로 주기억장치의 2배로 설정

#### 장점
- 부팅시간을 단축시킨다.
- 안정성이 높아진다.
- 백업과 업그레이드가 편리하다

#### 파티션 분할
- `fdisk` 명령어로 디스크 파이션을 생성, 수정, 삭제 등을 관리할 수 있다.
- `fdisk [욥션] [장치명]`
- 옵션
  * `-a`: 부팅 가능한 플래그로 지정
  * `-I`: 알려진 파티션 유형 목록 출력
  * `-m`: 이 목록 출력
  * `-n`: 새로운 파티션 생성
  * `-t`: 파티션 유형 변경
  * `-w`: 파티션 정보를 디스크 테이블에 기록
  * `-p`: 파티션 정보 확인
  * `-q`: 작업 종료 후 빠져나감

#### 디스크와 장치명
- 디스크 유형은 IDE(E-IDE), SCSI, S-ATA, SAS 등이 있다.
- SCSI, S-ATA, SAS, USB 유형은 `/dev/sda`, `/dev/sdb` 등과 같은 장치명을 사용한다.
- IDE(E-IDE) 유형은 `/dev/hda`, `/dev/hdb` 등과 같은 장치명을 사용한다.
- 장치명 및 파티션 번호
 * `/dev/sda2 sd(하드디스크유형:SCSI 유형하드디스크) a(디스크 개수: 첫번째 물리적인 하드디스크) 2(파티션번호: 두번째 파티션)`

### 2.3.3 디렉터리
- 최상위 디렉터리(/) 아래로 계층적인 트리구조로 이루어져 있다.

- `/`: 최상위 디렉토리로 루트(/) 디렉터리라고함
- `/bin`: 'System Binary'의 약어로 이진 파일이며, 리눅스에서 기본 명령어가 저장된 디렉터리
- `/usr`: 시스템에서 사용되는 각종 프로그램이 설치되는 디렉터리
- `/etc`: 리눅스 시스템의 각종 환경설정 파일과 디렉터리가 저장된 디렉터리
- `/sbin`: 시스템 관리를 위한 명령어가 저장된 디렉터리
- `/lib`: 프로그램의 각종 라이브러리 파일이 저장된 디렉터리로 유틸리티(Utility), 패키지(Package) 등의 파일 포함
- `/var`
  * 시스템에서 사용되는 동적인 파일을 저장하는 디렉터리
  * 각종 시스템 로그파일, 사용자 로그인에 대한 로그 기록
  * 메일서버를 운영한다면 사용자에게 전송된 메일을 임시로 저장하는 디렉터리
- `/tmp`: 임시 디렉터리로 스티키 비트(Sticky Bit)가 설정 되어 있음
- `/root`: 시스템 관리자(root)의 홈 디렉터리
- `/proc`
  * 시스템의 각종 프로세서, 프로그램 정보 그리고 하드웨어 정보가 저장된 디렉터리
  * 가상 파일 시스템으로 하드디스크에 물리적인 용량을 가지지 않는 디렉터리
- `/dev`: 시스템의 각종 장치에 접근하기 위한 장치 드라이버가 저장된 디렉터리
- `/home`: 일반 사용자의 홈 디렉터리

### 2.3.4 LVM(Logical Volume Manager)
- 논리 볼륨 관리자라는 의미로 여러개의 물리적인 하드디스크를 논리적인 디스크로 할당하여 유연하게 관리할 수 있도록 도와준다.
- 여래 개의 물리적인 하드디스크를 하나의 대용량 파일 시스템으로 만든다.
- 서버 운영 시 대용량 저장 공간이 필요할 때 주로 사용한다.

#### LVM의 구조
- 물리적 볼륨(Physical Volume(PV)): 각각의 파티션을 'LVM'으로 사용하기 위해 형식을 변환 시킨 것(/dev/hda1, /dev/hda2 등)
- 볼륨 그룹(Volume Group(VG))
  * 'PV'로 되어있는 파이션을 하나의 물리적인 그룹으로 만듬
  * `/dev/sda1`을 하나의 그룹으로 만들 수 있고, `/dev/sda1`과 `/dev/sda2` 파티션 두개를 하나의 그룹으로 만들 수도 있음
- 논리적 볼륨(Logical Volume(LV))
  * 사용자가 다루게 되는 부분
  * 마운트 포인터로 사용할 실질적인 파티션
  * 크기를 확장 및 축소 시킬 수 있음

### 2.3.5 RAID(Redundant Array of Indepnedent Disks)
- 여려 개의 물리적인 하드디스크를 하나의 논리적인 디스크로 인식하게 만드는 기술이다.
- 중요한 데이터를 가지고 있는 서버에 주로 사용되며 여러 개의 하드디스크에 동일한 데이터를 다른 위치에 중복해서 저장하는 기술이다.
- 데이터를 저장하는 방법에 따라 다양한 방법이 있으며 이 방법들을 레벨이라 한다. 레벨에 따라 성능을 향상하거나, 저장장치의 신뢰성을 높이는 데 사용한다.

#### 종류
- 하드웨어 RAID
  * RAID 기능을 하드웨어로 구현한것
  * 하드웨어 제조업체에서 여러 개의 하드디스크로 만들어 공급
  * 안정적이지만 고가
- 소프트웨어 RAID
  * RAID 기능을 소프트웨어로 구현한 것
  * 주로 운영체제 안에서 구현되며, 하드웨어 RAID 대안
  * 하드웨어 구성에 비해 성능향상 적고, 안정성이 떨어짐
  
#### RAID 레벨 구조
- RAID 0
  * 빠른 데이터의 입출력을 위해 스트라이핑(Striping)을 사용한다. 
  * 하나의 디스크에 오류가 발생하면 모든 데이터를 잃어버릴 수 있다.
  * 스트라이핑: 성능 향상을 위해 데이터를 1개 이상의 디스크 드라이브에 저장하여 드라이브를 병렬로 사용할 수 있는 기술이다. 즉 논리적으로 연속된 데이터들이 여러 개의 물리적인 디스크 드라이브에 나누어 저장하는 기술이다.
- RAID 1
  * 두 개 이상의 디스크를 미러링(Mirroring)을 통해 하나의 디스크 처럼 사용한다.
  * 완전히 동일하게 데이터를 복제하기 때문에 사용할 수 있는 용량이 절반밖에 되지 않는다.
  * 하나의 디스크에 오류가 발생하면 미러링된 디스크를 통해 복구가 가능하다.
- RAID 0+1
  * RAID 0과 RAID 1을 결합하는 방식이다.
  * 최소 4개 이상의 디스크에서 먼저 2개씩 'RAID 0(스트라이핑)'으로 묶고 이것을 다시 'RAID 1(미러링)'으로 결합하는 방식이다. 
- RAID 2
