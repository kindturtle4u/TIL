> 출처 :  리눅스마스터 2급 한권으로 끝내기 읽으면서 정리 

# 5. 셸(Shell) 관리
## 5.1 셸의 특징 및 명령어
### 5.1.1 셸(Shell)
- 사용자가 입력한 명령어를 해석하여 커널에 전달한다.
- 윈도(도스)에서의 command.com과 유사한 기능을 수행한다.
- 사용자가 로그인 시 실행되어 사용 환경을 제공한다.
- 셸 프로그래밍 언어(스크립트 언어)이다.
- 리다이렉션과 파이프 기능을 수행한다.
- 사용자 셸 프롬프트(본 셸 계열: $, C 셸 계열: %)이다.

### 5.1.2 셸 관련 파일
#### /etc/shells
- 사용자들이 사용 가능한 셸을 정의하는 파일이다

#### /etc/passwd
- 사용자 계정 정보가 저장되는 파일이다.

### 5.1.3 셸 관련 명령어
#### echo $SHELL
- 현재 로그인한 사용자가 사용하는 셸을 확인하는 명령어이다.
- 기본형식: `echo [셸 환경변수]`

#### chsh
- 사용할 셸 종류를 변경하는 명령어이다.
- 기본형식: `chsh [옵션] [셸 종류]`

#### usermod
- 사용자 계정 정보를 변경하는 명령어이다.
- 활용: 'test' 사용자가 사용할 셸을 C셸(/bin/csh)로 변경 `usermod -s /bin/csh test`

## 5.2 환경설정
### 5.2.1 환경변수
- 환경변수는 현재 사용하고 있는 셸(Bash 등)의 실행 파일에 대한 위치를 저장하는 변수를 말하며 변수명과 값으로 구성된다.

#### 종류
- 전역 변수: 전체 셸에 영향을 미치는 변수, 하위 셸에 기능 상속 가능
- 지역 변수: 특정 사용자에게만 적용되는 변수, 하위 셸에 상속 불가능

#### 주요 환경변수
- DISPLAY: X윈도 환경에서 화면 출력을 위해 접속할 X 서버의 주소 및 장치번호
- HOMOE: 사용자의 홈 디렉토리
- HOSTNAME: 호스트명
- LANG: 기본 지원 언어
- PS1: 셸 프롬프트 선언 변수
- PS2: 2차 셸 프롬프트 선언 변수
- PWD: 현재 작업 디렉터리
- SHELL: 로그인 셸
- TERM: 터미널 명
- TMOUT: 자동 로그아웃 시간
- USER: 사용자명

#### 환경변수 관련 명령어
- `export`: 환경변수 목록을 확인하는 명령어이다
- `echo $변수명`: 화면에 텍스트를 출력하는 명령어이다
- `export 변수명=변수값`: 해당 변수명에 변수값을 등록하는 명령어이다.
- `export 변수명=$변수명:변수값`: 현재 PATH에 경로를 추가하는 명령이다.

#### 셸 프롬프트 설정
- 기본 프롬프트 구조: `[사용자명][구분자][호스트명][현재디렉터리][사용자구분]`

### 5.2.2 배시 셸(Bash Shell) 관련 파일
#### 전역 설정 파일
- `/etc/profile`
  * 모든 사용자의 셸 환경을 제어하는 전역 설정파일
  * 환경변수와 배시(Bash)가 실행하는 프로그램 제어
- `/etc/bashrc`
  * 별칭(alias)과 배시(Bash)가 실행하는 함수를 제어

#### 지역설정 파일
- `~/.bash_profile`
  * 개별 사용자의 셸 환경을 제어하는 지역 설정 파일
- `~/.bash_logout`
  * 로그아웃 직전에 실행되는 설정 파일
- `~/.bash_history`
  * 사용자가 입력한 명령어가 저장되는 파일
  * 방향키로 이전 명령어를 확인할 수 있음
  * 이전에 입력했던 명령어를 재사용 가능
- `~/.bashrc`
  * 별칭(alias)과 배시(Bash)가 실행하는 함수를 지역적으로 제어

### 5.2.3 배시 셸(Bash Shell)의 주요 기능
#### history 기능
- 사용자가 사용했던 명령어를 저장하고, 필요시 재사용할 수 있게 하는 기능이다.
- 이전 입력했던 명령어를 방향키를 이용하여 재사용할 수 있어 복잡하거나, 긴 명령어를 입력할 때 유용한 기능이다.
- 명령어는 기본적으로 1,000개 까지 저장되며, 사용자의 홈 디렉터리의 '.bash_history' 파일에 저장된다.

#### history 명령어
- 기본형식: `history [옵션]`
- 옵션
  * `!!`: 마지막으로 실행한 명령 실행
  * `!n`: n번째 명령어 실행
  * `!-n`: 현재 행에서 n개 뺀 행의 명령 실행
  * `!string`: 가장 최근에 string으로 시작되는 명령 실행
  * `!$`, `!!$`: 마지막 명령의 인자값
  * `!*`: 마지막 실행한 명령에 사용된 인자값
  * `!?string?`: 가장 최근에 문자열(string)을 포함한 단어 출력
  * `n`: 가장 최근에 실행한 명령을 'n'개 출력
  * `-c`: 히스토리(history) 삭제

#### history 관련 환경변수
- `HISTSIZE`: 히스토리(history) 크기 지정
- `HISTFILE`: 히스토리(history) 파일 위치
- `HISTFILESIZE`: 히스토리(history) 파일 크기
- `HISTCONTROL`: 중복되는 명령어에 대한 기록 유무
- `HISTTIMEFORMAT`: 히스토리(history) 명령어 수행 시간, 출력 형태 지정

#### alias
- 별칭으로 지정하여 작업을 편리하게 해주는 기능이다.
- 시스템 명령어를 단축시키기 위해 주로 사용되며, 주기적으로 사용되는 명령어에 기 변수를 추가하기 위해 사용한다.
- 기본형식: `alias [단축명령어]='명령어'`
- `alias`: alias 등록확인
- `unalias`: alias 제거
