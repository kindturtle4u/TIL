> 출처 :  모두의 리눅스 읽으면서 정리 

# 13. 정규 표현식
## 13.1 grep 명령어와 정규 표현식
- 문자열 검색 `grep [옵션] <검색패턴> <파일이름>`: grep은 `<파일이름>`에서 `<검색 패턴>`에 일치하는 행을 출력합니다.
- 문자열 bash를 포함하는 행 출력
```shell
$ grep bash /etc/passwd
root:x:0:0:root:/root:/bin/bash
ec2-user:x:1000:1000:Cloud User:/home/ec2-user:/bin/bash
```
- `-n` 옵션은 행번호를 출력합니다. 
```shell
$ grep -n PS1 /etc/bashrc
16:  if [ "$PS1" ]; then
45:    [ "$PS1" = "\\s-\\v\\\$ " ] && PS1="[\u@\h \W]\\$ "
49:    # if [ "$PS1" ]; then
50:    #   PS1="[\u@\h:\l \W]\\$ "
85:            if [ "$PS1" ]; then
```
- `-i` 대소문자를 구별하지 않고 검색
- `-v` 문자열을 포함하지 않는 행 출력
- 다른 필터와 마찬가지로 grep 명령어도 파일을 지정하지 않으면 표준 입력을 읽습니다.

### 13.1.1 정규 표현식이란
- grep에서는 일반적인 문자열 외에도 정규 표현식이라는 검색 패턴을 지정할 수 있습니다.
- 정규표현식 ^을 사용하여 cron으로 시작하는 행만 출력 `$ ls /etc | grep '^cron`
- 정규표현식을 '(작은따옴표)로 감싸주었습니다. 이는 셸이 정규 표현식을 확장하지 않도록 하기 위해서 입니다.
- 정규표현식에서는 `*`,`{`,`}`,`$` 등의 기호가 특별한 의미로 사용됩니다. 이러한 문자를 메타 문자라 부르며 메타 문자의 대부분은
셸에서도 특별한 의미를 가집니다. 가령 *는 셸에서 와일드카드로 해석되어 경로가 확장됩니다.
```shell
$ grep ab* sample.txt #입력한 명령어

# 셸에 의하야 ab.txt ab.sh라는 문자열로 확장됨
$ grep ab.txt ab.sh sample.txt # 실핸된 명령어 (잘못됨)

#따라서 grep에서 정규표현식을 사용하고 싶을 때는 `ab*`처럼 작은 따옴표로 깜싸줘야 합니다.
```

### 13.2 임의의 문자를 지정하는 메타 문자
- 점을 사용하여 임의의 문자 하나를 지정 `$ grep 't.st` example.txt
- 임의의 문자가 아니라 점이라는 기호 자체를 검색하고 싶을 때는 `\.`라고 표시 해야 합니다.
- 이렇게 마타 문자 앞에 `\`를 붙여서 메타 문자로 인식하게 하는 것을 이스케이프라 합니다.

### 13.2.1 특정 문자를 지정하는 메타 문자
- 임의의 문자 하나가 아니라 여러 문자 중 하나를 지정하고 싶다면 메타 문자 `[]`를 사용해야 합니다. 이 메타문자는 괄호 안에 있는 문자 중
하나를 의미합니다.
- 문자의 범위를 표현하는 하이픈 사용 `[a-k]``[a-zA-Z]`
- 지정한 문자 이외의 문자를 검색 `[^문자]`
- 문자에 대한 메타 문자
   * `.`: 임의의 문자 하나
   * `[]`: `[]`안에 포함된 임의의 문자 하나
   * `[^]`: `[]`안에 포함되지 않는 문자
   * `\`: `\` 다음의 문자를 메타 문자로 인식하지 않는다.

## 13.3 위치를 지정하는 메타 문자
- net으로 시작하는 문자열을 검색 `$ grep '^net' example.txt`
- net으로 끝나는 행 검색 `$grep 'net$' example.txt`

## 13.4 반복을 지정하는 메타 문자
- 이 메타 문자는 다른 정규표현식의 뒤에서 사용되어 직전의 정규표현식이 일정 횟수만큼 반복되는 것을 의미합니다.

### 13.4.1 확장 정규 표현식이란
- 지금 까지 소개한 정규표현식은 기본 정규 표현식이라 불리는 것으로 정규 표현식을 지원하는 모든 명령어에서 사용할 수 있습니다.
그리고 사용할 수 있는 메타 문자가 늘어난 확장 정규 표현식도 있습니다. 확장 정규표현식을 지원하지 않는 명령어도 있기 때문에 이 둘을 
구분해서 사용해야 합니다.
- `-E` 옵션을 지정하여 확장 정규표현식으로 검

### 13.4.2 확장 정규 표현식에서 반복 횟수를 지정
### 13.4.3 반복 횟수를 지정하는 메타 문자
- 반복 횟수를 지정하는 메타 문자
  * `*`: 0회 이상 반복
  * `+`: 1회 이상 반복
  * `?`: 0회 또는 1회 반복
  * `{m,n}`: m회 이상 n회 이하 반복
  * `{m}`: m회 반복
  * `{m,}`: m회 이상 반복

## 13.5 그 외의 메타 문자
- `()`은 정규 표현식을 그룹화할 때 사용합니다.
- Wine이라는 단어가 2회 이상 반복되는 패턴을 검색 `grep -E '(Wine){2,}' drink.txt`
- `|`는 복수의 정규식을 OR 조건으로 연결할 때 사용합니다. 메타 문자 `|`는 보통 그룹화 할때 사용하는 `()`와 함께 사용됩니다.
- My Vodka 혹은 My Wine을 검색 `$ grep -E 'My (Vodka|Wine)' drink.txt`

## 13.6 정규 표현식 사용하기
- Vim이나 less 명령어에서 `/`를 입력하면 텍스트를 검색할 수 있는데 여기서도 정규 표현식을 사용할 수 있습니다.
