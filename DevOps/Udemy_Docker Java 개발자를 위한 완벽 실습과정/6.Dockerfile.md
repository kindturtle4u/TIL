> 출처 : udemy Docker - Java 개발자를 위한 완벽 실습 과정 (강사: Richard Chesterwood)

# 6.Dockerfile
## `commit`으로 이미지 구축
- 흔하지는 않지만 실행중인 컨테이너의 스탭샷으로 이미지를 만들 수 있습니다.
  * ubuntu 이미지를 사용했으니까 그걸로 작업
  * `docker image ls`
  * `docker container run -it ubuntu` 터미널과 대화형으로 연결되도록 실행
  * 컨테이너 내부에서 변경사항은 일시적입니다. 컨테이너를 중지하고 제거하면 변경 사항이 사라짐
  * Ubuntu 패키지 관리자 `apt-get`, `apt-get update`를 먼저 해야됨
  * `apt-cache search jdk` jdk 패키지 검색
  * `apt-get intall -y openjdk-8-jdk`
  * `java -version` jdk 설치 확인
  * `exit` 컨테이너 중지
  * https://docs.docker.com/reference/cli/docker/container/commit/
  * `docker container commit -a "namsangjae kindturtle4u@gmail.com" 84292b6cf58d myjdkimage`
  * `docker image ls` 이미지 레포지토리에 새로운 이미지 생성됨
  * `docker container prune` 중지된 모든 컨테이너 제거
  * `docker container run -it myjdkimage`
  * `java -version`

## Dockerfiles
- 스냅샷을 `commit`으로 이미지를 만드는 것은 일반적으로 좋은 방법이 아님
- 시간이 흐른 뒤 이미지를 보고 이미지 내부에 무엇이 있는지 알 방법이 없기 때문
- 이런 이유로 거의 대부분 Dockerfile을 대신 사용해 이미지를 생성합니다.
```dockerfile
# 확장하고 있는 이미지명 명시 이미지를 가져와서 추가하고 새이미지를 생성(기존 이미지는 변경 불가)
# ubuntu: 뒤에 붙은 latest가 태그임
FROM ubuntu:latest 

# Optional 이후에 이미를 사용할 사용자에게 제공하는 것
MAINTAINER Richard Chesterwood "contact@virtualpairprogrammer.com"

# 커맨드 실행
RUN apt-get update && apt-get install -y openjdk-8-jdk

# 컨테이너를 실행할 때 기본적으로 수행할 커맨드
CMD ["/bin/bash"]
```
- Dockerfile을 사용해 이미지 만들기: `docer image build -t jdk-image-from-dockerfile`
  * `-t`: 이미지에 태그 지정
  * `.` : 이미지 생성 작업을 수행할 폴더
- 실행 시 각 단계에서 캐시에 필요한 이미지가 있기 때문에 동일 작업 수행 시 효율성을 높일 수 있음
- `docker container run -it jdk-image-from-dockerfile`: 컨테이너 실행
- `java -version`: 자바 설치 확인


## 이미지에 파일 복사

## 이미지 커맨드(CMD)

## Copy와 Add 비교

## Label과 MAINTAINER 비교

